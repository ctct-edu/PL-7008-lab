---
lab:
    title: 'Microsoft Copilot Studioで生成AIを使用する'
    module: 'Microsoft Copilot Studioエージェントの拡張'
---

# Microsoft Copilot Studioで生成AIを使用する

## シナリオ

この演習では、以下を実施します:

- エージェントでナレッジと生成AIを使用する

この演習の所要時間は約**20**分です。

## 学習内容

- 生成回答機能を使用してエージェントの応答を改善する方法

## ラボの概要

- 生成AIを有効にする
- ナレッジを追加する
  
## 前提条件

- **Lab: エージェントフローの作成**を完了していること

## 詳細な手順

## 演習1 - 生成AIの構成

### タスク1.1 - オーケストレーションを有効にする

1. まだ開いていない場合は、Microsoft Copilot Studioポータル`https://copilotstudio.microsoft.com`にアクセスし、適切な環境にいることを確認します。

1. 左側のナビゲーションから**エージェント**を選びます。

1. 前のラボで作成した**Real Estate Booking Service**を選択します。

1. 画面右上の**設定**ボタンを選択します。

1. **エージェントの応答に生成AIオーケストレーションを使用しますか？**で**はい - 利用可能なツールとナレッジを適宜使用して、応答を動的にします**を選びます。

1. **保存**を選択します。

1. 設定ウィンドウを閉じます。

### タスク1.2 - 会話ブースティングトピックで生成回答を使用する

1. **トピック**タブを選択し、**システム**フィルターを選びます。

1. **会話の強化**トピックを選択します。

1. キャンパス内の**生成型の回答を作成**ノードを確認します。

### タスク1.3 - 認証を構成する

1. 画面右上の**設定**を選択します。

1. **セキュリティ**タブを選びます。

1. **認証**を選択します。

1. **Microsoftで認証**を選びます。

1. **保存**を選択します。

1. 確認ウィンドウで**保存**を選択します。

1. 右上の**X**を選択して**設定**を閉じます。

## 演習2 - ナレッジの追加

### タスク2.1 - Dataverseからナレッジを追加する

1. **ナレッジ**タブを選択します。

1. **+ ナレッジを追加**を選びます。

1. **Dataverse**を選択します。

1. **Real Estate Property**テーブルを選びます。

1. **エージェントに追加**を選択します。

### タスク2.2 - ファイルからナレッジを追加する
1. **+ ナレッジを追加**を選びます。

1. **One Drive**を選び、**項目の参照**、**マイファイル**と進み、事前にコピーしたファイル **`SummitRealtyCaseStudy.docx`** を選んで**エージェントに追加**します。

1. 追加したナレッジを選択します。

1. **オプションを含める/除外する**を展開し、**`トピックによって参照されている場合のみ`** を選択します。

1. **保存** します。

## 演習3 - フォールバックトピックの構成

### タスク3.1 - システムフォールバックトピックで生成回答を使用する

1. **トピック** タブを選択し、**システム** フィルターを選びます。

1. **フォールバック**トピックを選択します。

1. **メッセージ**ノードの **省略記号（...）** メニューを選択し、**削除**を選びます。

1. **条件**ノードの下にある **+** アイコンを選択し、**詳細**を選択してから、**生成回答**を選びます。

1. **入力**フィールドで、右側の…をクリックし、**システム**タブを選択し、**Activity.Text**を選びます。

1. **データソース**の下の**編集**を選択します。

1. **選択したソースのみを検索**を選びます。

1. **Real Estate Property** Dataverseテーブルを選択します。

1. **AI が備える一般ナレッジの使用を AI に許可する (プレビュー)** の選択を解除します。

1. **コンテンツモデレーションレベル**の下の**カスタマイズ**チェックボックスを選択し、**中**を選びます。

1. **保存**を選択します。

## 演習4 - 生成AIのテスト

### タスク4.1 エージェントのナレッジをテストする

1. 開いていない場合は、ページ右上の**テスト**アイコンを選択してテストパネルを開きます。

1. テストパネル上部の**新しいテストセッションを開始**アイコンを選択します。

1. エージェントを探索して、ナレッジソースをどのように使用するかを確認しましょう。例えば:
  - `どの都市に物件リストがありますか？`
  - `Summit RealtyはどのCRMを使用していますか？`
